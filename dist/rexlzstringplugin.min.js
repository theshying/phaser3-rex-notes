!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexlzstringplugin=t()}(void 0,function(){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n);return u(this,o?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}(function(e){v=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};var v,n,o,r,s,t=s={compressToBase64:function(e){if(null==e)return"";var t=s._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:s._decompress(t.length,32,function(e){return i(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":s._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:s._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(e){if(null==e)return s.decompress(e);for(var t=new Array(e.length/2),n=0,o=t.length;n<o;n++)t[n]=256*e[2*n]+e[2*n+1];var r=[];return t.forEach(function(e){r.push(v(e))}),s.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),s._decompress(t.length,32,function(e){return i(o,t.charAt(e))}))},compress:function(e){return s._compress(e,16,function(e){return v(e)})},_compress:function(e,t,n){if(null==e)return"";for(var o,r,i,s,c={},u={},a="",p=2,f=3,l=2,h=[],d=0,m=0,y=0;y<e.length;y+=1)if(i=e.charAt(y),Object.prototype.hasOwnProperty.call(c,i)||(c[i]=f++,u[i]=!0),s=a+i,Object.prototype.hasOwnProperty.call(c,s))a=s;else{if(Object.prototype.hasOwnProperty.call(u,a)){if(a.charCodeAt(0)<256){for(o=0;o<l;o++)d<<=1,m==t-1?(m=0,h.push(n(d)),d=0):m++;for(r=a.charCodeAt(0),o=0;o<8;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1}else{for(r=1,o=0;o<l;o++)d=d<<1|r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r=0;for(r=a.charCodeAt(0),o=0;o<16;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1}0==--p&&(p=Math.pow(2,l),l++),delete u[a]}else for(r=c[a],o=0;o<l;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1;0==--p&&(p=Math.pow(2,l),l++),c[s]=f++,a=String(i)}if(""!==a){if(Object.prototype.hasOwnProperty.call(u,a)){if(a.charCodeAt(0)<256){for(o=0;o<l;o++)d<<=1,m==t-1?(m=0,h.push(n(d)),d=0):m++;for(r=a.charCodeAt(0),o=0;o<8;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1}else{for(r=1,o=0;o<l;o++)d=d<<1|r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r=0;for(r=a.charCodeAt(0),o=0;o<16;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1}0==--p&&(p=Math.pow(2,l),l++),delete u[a]}else for(r=c[a],o=0;o<l;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1;0==--p&&(p=Math.pow(2,l),l++)}for(r=2,o=0;o<l;o++)d=d<<1|1&r,m==t-1?(m=0,h.push(n(d)),d=0):m++,r>>=1;for(;;){if(d<<=1,m==t-1){h.push(n(d));break}m++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:s._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){for(var o,r,i,s,c,u,a=[],p=4,f=4,l=3,h="",d=[],m={val:n(0),position:t,index:1},y=0;y<3;y+=1)a[y]=y;for(r=0,s=Math.pow(2,2),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;u=v(r);break;case 1:for(r=0,s=Math.pow(2,16),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;u=v(r);break;case 2:return""}for(o=a[3]=u,d.push(u);;){if(m.index>e)return"";for(r=0,s=Math.pow(2,l),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;switch(u=r){case 0:for(r=0,s=Math.pow(2,8),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;a[f++]=v(r),u=f-1,p--;break;case 1:for(r=0,s=Math.pow(2,16),c=1;c!=s;)i=m.val&m.position,m.position>>=1,0==m.position&&(m.position=t,m.val=n(m.index++)),r|=(0<i?1:0)*c,c<<=1;a[f++]=v(r),u=f-1,p--;break;case 2:return d.join("")}if(0==p&&(p=Math.pow(2,l),l++),a[u])h=a[u];else{if(u!==f)return null;h=o+o.charAt(0)}d.push(h),a[f++]=o+h.charAt(0),o=h,0==--p&&(p=Math.pow(2,l),l++)}}};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}null!=e&&(e.exports=t)})(e={exports:{}});var e,n=e.exports,p=Phaser.Utils.Objects.GetFastValue,f=function(){function t(e){r(this,t),this.resetFromJSON(e)}return i(t,[{key:"resetFromJSON",value:function(e){return this.setEncoding(p(e,"encoding",0)),this}},{key:"toJSON",value:function(){return{encoding:this.encoding}}},{key:"setEncoding",value:function(e){return void 0===e?e=0:"string"==typeof e&&(e=l[e.toLowerCase()]||0),this.encoding=e,this}},{key:"compress",value:function(e){var t=h[this.encoding];return n[t](e)}},{key:"decompress",value:function(e){var t=d[this.encoding];return n[t](e)}}]),t}(),l={none:0,base64:1,utf16:2,uri:3},h=["compress","compressToBase64","compressToUTF16","compressToEncodedURIComponent"],d=["decompress","decompressFromBase64","decompressFromUTF16","decompressFromEncodedURIComponent"];return function(e){var t=o;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e);var n=a(o);function o(e){return r(this,o),(e=n.call(this,e)).lzstring=new f,e}return i(o,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"destroy",value:function(){this.lzstring=null,this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}},{key:"add",value:function(e){return new f(e)}}]),o}(Phaser.Plugins.BasePlugin)});
