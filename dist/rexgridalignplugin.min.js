!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexgridalignplugin=e()}(void 0,function(){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1})}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");e=t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=s(i);return u(this,n?(t=s(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function i(t,e,i){if(t&&"number"!=typeof t){if(t.hasOwnProperty(e))return t[e];if(-1===e.indexOf("."))return i;for(var n=e.split("."),r=t,o=i,s=0;s<n.length;s++){if(!r.hasOwnProperty(n[s])){o=i;break}o=r[n[s]],r=r[n[s]]}return o}return i}function t(){}var R=Math.sqrt(3),D=Math.sqrt(3),e=0,a=1,f=2,l=3,E=e,F=a,N=f,q=l,J={},B=e,G=a,A=f,U=l,v={},V={},Z=e,I=a,K=f,L=l,Q={},$={},tt=e,et=a,it=f,nt=l,e=function(){function e(t){r(this,e),this.resetFromJSON(t)}return o(e,[{key:"resetFromJSON",value:function(t){this.setType(i(t,"staggeraxis",1),i(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(i(t,"x",0),i(t,"y",0));var e=i(t,"size",void 0);void 0!==e?this.setCellRadius(e):this.setCellSize(i(t,"cellWidth",0),i(t,"cellHeight",0))}},{key:"setType",value:function(t,e){return"string"==typeof t&&(t=rt[t]),"string"==typeof e&&(e=ot[e]),this.staggeraxis=t,this.staggerindex=e,this.mode=0===t?0===e?nt:it:0===e?et:tt,this}},{key:"setDirectionMode",value:function(){return this.directions=6,this}},{key:"setOriginPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"setCellRadius",value:function(t){this.size=t;var t={size:this.size,type:this.staggeraxis},e=0===(e=t).type?2*e.size:R*e.size,t=0===(t=t).type?D*t.size:2*t.size;return this.setCellSize(e,t),this}},{key:"cellWidth",get:function(){return this.width},set:function(t){this.width=t}},{key:"cellHeight",get:function(){return this.height},set:function(t){this.height=t}}]),e}(),rt=(Object.assign(e.prototype,{getWorldXY:function(t,e,i){void 0===i?i={}:!0===i&&(i=J);var n=t*this.width,r=e*this.height;switch(this.mode){case E:1&e&&(n+=this._halfWidth),r*=.75;break;case F:1&e&&(n-=this._halfWidth),r*=.75;break;case N:n*=.75,1&t&&(r+=this._halfHeight);break;case q:n*=.75,1&t&&(r-=this._halfHeight)}return n+=this.x,r+=this.y,i.x=n,i.y=r,i},getWorldX:function(t,e){return this.getWorldXY(t,e,!0).x},getWorldY:function(t,e){return this.getWorldXY(t,e,!0).y},getTileXY:function(t,e,i){var n,r;switch(void 0===i?i={}:!0===i&&(i=$),t-=this.x,e-=this.y,this.mode){case Z:case I:r=e*(4/3)/this.height,n=t/this.width-2/3*(e/this.height);break;case K:case L:r=e/this.height-2/3*(t/this.width),n=t*(4/3)/this.width}f=n,l=r,void 0===(u=Q)?u={}:!0===u&&(u=v),u.x=f,u.y=-f-l,u.z=l;var o,s,h,u,c,a,f=u,l=("number"!=typeof(l=f)&&(l=(h=l).x,o=h.y,s=h.z),void 0===h?h={}:!0===h&&(h=v),u=Math.round(l),c=Math.round(o),a=Math.round(s),l=Math.abs(u-l),o=Math.abs(c-o),s=Math.abs(a-s),o<l&&s<l?u=-c-a:s<o?c=-u-a:a=-u-c,h.x=u,h.y=c,h.z=a,this.mode),d=f.x,g=(f.y,f.z),y=i;switch(void 0===y?y={}:!0===y&&(y=V),l){case B:y.x=d+(g-(1&g))/2,y.y=g;break;case G:y.x=d+(g+(1&g))/2,y.y=g;break;case A:y.x=d,y.y=g+(d-(1&d))/2;break;case U:y.x=d,y.y=g+(d+(1&d))/2}return i},getTileX:function(t,e){return this.getTileXY(t,e,!0).x},getTileY:function(t,e){return this.getTileXY(t,e,!0).y}}),{y:0,x:1}),ot={even:0,odd:1},p=new Phaser.GameObjects.Zone({sys:{queueDepthSort:t,events:{once:t}}},0,0,1,1);p.setOrigin(0);function d(t){var e=Y(t);return t.y+e-e*t.originY}function g(t){var e=X(t);return t.x-e*t.originX+.5*e}function y(t,e){var i=Y(t);t.y=e-i+i*t.originY}function b(t){var e=X(t);return t.x-e*t.originX}function x(t,e){var i=X(t);t.x=e+i*t.originX}function w(t){var e=X(t);return t.x+e-e*t.originX}function k(t,e){var i=X(t);t.x=e-i+i*t.originX}function O(t){var e=Y(t);return t.y-e*t.originY+.5*e}function _(t){var e=Y(t);return t.y-e*t.originY}function P(t,e){var i=Y(t);t.y=e+i*t.originY}function W(t,e,i,n,r){j[i](t,e,n,r)}var a=0,f=1,l=2,st=4,ht=6,ut=8,m=10,ct=12,X=function(t){return void 0!==t.displayWidth?t.displayWidth:t.width},Y=function(t){return void 0!==t.displayHeight?t.displayHeight:t.height},T=function(t,e){var i=X(t),n=i*t.originX;return t.x=e+n-.5*i,t},z=function(t,e){var i=Y(t),n=i*t.originY;return t.y=e+n-.5*i,t},j=[],M=(j[11]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),T(t,g(e)+i),y(t,d(e)+n),t},j[m]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),x(t,b(e)-i),y(t,d(e)+n),t},j[ct]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),k(t,w(e)+i),y(t,d(e)+n),t},j[ht]=function(t,e,i,n){var r;return void 0===i&&(i=0),void 0===n&&(n=0),r=t,i=g(e)+i,e=O(e)+n,T(r,i),z(r,e),t},j[st]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),x(t,b(e)-i),z(t,O(e)+n),t},j[ut]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),k(t,w(e)+i),z(t,O(e)+n),t},j[f]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),T(t,g(e)+i),P(t,_(e)-n),t},j[a]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),x(t,b(e)-i),P(t,_(e)-n),t},j[l]=function(t,e,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),k(t,w(e)+i),P(t,_(e)-n),t},Phaser.Utils.Objects.GetFastValue),S=new e,at={},ft={},m=function(){function e(t){r(this,e),this.resetFromJSON(t)}return o(e,[{key:"resetFromJSON",value:function(t){this.setType(i(t,"type",0)),this.setDirectionMode(i(t,"dir",4)),this.setOriginPosition(i(t,"x",0),i(t,"y",0)),this.setCellSize(i(t,"cellWidth",0),i(t,"cellHeight",0))}},{key:"setType",value:function(t){return"string"==typeof t&&(t=lt[t]),this.mode=t,this}},{key:"setDirectionMode",value:function(t){return"string"==typeof t&&(t=dt[t]),this.directions=t,this}},{key:"setOriginPosition",value:function(t,e){return this.x=t,this.y=e,this}},{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function(t,e){return this.width=t,this.height=e,this}},{key:"cellWidth",get:function(){return this.width},set:function(t){this.width=t}},{key:"cellHeight",get:function(){return this.height},set:function(t){this.height=t}}]),e}(),lt=(Object.assign(m.prototype,{getWorldXY:function(t,e,i){var n,r;switch(void 0===i?i={}:!0===i&&(i=at),this.mode){case 0:n=t*this.width,r=e*this.height;break;case 1:n=(t-e)*this._halfWidth,r=(t+e)*this._halfHeight}return n+=this.x,r+=this.y,i.x=n,i.y=r,i},getWorldX:function(t,e){return this.getWorldXY(t,e,!0).x},getWorldY:function(t,e){return this.getWorldXY(t,e,!0).y},getTileXY:function(t,e,i){void 0===i?i={}:!0===i&&(i=ft),t-=this.x,e-=this.y;var n=t/this.width,r=e/this.height;switch(this.mode){case 0:i.x=Math.round(n),i.y=Math.round(r);break;case 1:i.x=Math.round(n+r),i.y=Math.round(r-n)}return i},getTileX:function(t,e){return this.getTileXY(t,e,!0).x},getTileY:function(t,e){return this.getTileXY(t,e,!0).y}}),{orthogonal:0,isometric:1,staggered:2}),dt={"4dir":4,"8dir":8},H=Phaser.Utils.Objects.GetFastValue,C=new m;return function(t){var e=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t);var i=c(n);function n(t){return r(this,n),i.call(this,t)}return o(n,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"hexagon",value:function(t,e){for(var i=t,n=M(t=void 0===(t=e)?{}:t,"width",-1),r=M(t,"height",-1),e=M(t,"cellWidth",1),o=M(t,"cellHeight",e),s=M(t,"staggeraxis",1),h=M(t,"staggerindex",1),u=M(t,"position",Phaser.Display.Align.CENTER),c=M(t,"x",0),t=M(t,"y",0),a=(S.setOriginPosition(c,t).setCellSize(e,o).setType(s,h),p.setSize(e,o),r-1),f=n-1,l=0,d=0,g=0,y=i.length;g<y;g++)if(S.getWorldXY(d,l,p),W(i[g],p,u),-1===n)l++;else if(-1===r)d++;else if(d===f){if(l===a)break;d=0,l++}else d++;return i}},{key:"quad",value:function(t,e){for(var i=t,n=H(t=void 0===(t=e)?{}:t,"width",-1),r=H(t,"height",-1),e=H(t,"cellWidth",1),o=H(t,"cellHeight",e),s=H(t,"type",0),h=H(t,"position",Phaser.Display.Align.CENTER),u=H(t,"x",0),t=H(t,"y",0),c=(C.setOriginPosition(u,t).setCellSize(e,o).setType(s),p.setSize(e,o),r-1),a=n-1,f=0,l=0,d=0,g=i.length;d<g;d++)if(C.getWorldXY(l,f,p),W(i[d],p,h),-1===n)f++;else if(-1===r)l++;else if(l===a){if(f===c)break;l=0,f++}else l++;return i}}]),n}(Phaser.Plugins.BasePlugin)});
