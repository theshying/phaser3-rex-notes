!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rexparticlesalongboundsplugin=t()}(void 0,function(){function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=r(n);return c(this,o?(e=r(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function u(e,t){void 0===f&&(f=new m),n=v(t,"padding",0),void 0===(o=d)&&(o={}),"number"==typeof n?(o.left=n,o.right=n,o.top=n,o.bottom=n):(o.left=b(n,"left",0),o.right=b(n,"right",0),o.top=b(n,"top",0),o.bottom=b(n,"bottom",0)),d=o;var n=e.width,o=e.height,e=-n/2-d.left,r=-o/2-d.top,e=(n+=d.left+d.right,o+=d.top+d.bottom,f.setTo(e,r,n,o),v(t,"stepRate",10));return f.getPoints(0,e)}function s(e,t,n,o,r){return void 0===r&&(r=!1),n?r?function(){e.apply(t,arguments),n.apply(o,arguments)}:function(){n.apply(o,arguments),e.apply(t,arguments)}:e.bind(t)}function p(e,t,n){var o,r,i,a,c,l,u,s,p,f;return void 0===t&&(t={}),void 0!==n&&n.scene||((r=(o=e).scene.add.particles()).preUpdate=function(e,t){o.scene?(y.call(this,o),h.call(this,e,t)):this.destroy()}.bind(r),n=r),n.setTexture(t.textureKey),t.gameObject=e,a=t,u=(i=n).createEmitter(O(a)),w(u,a),i.isRunning=!0,s=x(a,"reuse",!1),i.once("emitter.complete",function(){i.isRunning=!1,i.removeEmitter(u),u=null,i.emit("complete",a.gameObject,i),s||(i.destroy(),i=null)}),p=x(a,"gravityX",0),f=x(a,"gravityY",0),0===p&&0===f||(c=new k,l=a.gameObject,u.preUpdate=function(e,t){var n,o=0!==l.rotation?(c.setTo(p,f).rotate(-l.rotation),n=c.x,c.y):(n=p,f);u.setGravity(n,o),C.call(this,e,t)}.bind(u)),n}var t,f,d,h=Phaser.GameObjects.Particles.ParticleEmitterManager.prototype.preUpdate,y=function(e){void 0===t&&(t={x:0,y:0}),e.getCenter(t),this.setPosition(t.x,t.y).setScale(e.scaleX,e.scaleY).setAngle(e.angle).setAlpha(e.alpha),this.depth!==e.depth&&this.setDepth(e.depth)},b=Phaser.Utils.Objects.GetValue,m=Phaser.Geom.Rectangle,v=Phaser.Utils.Objects.GetValue,g=Phaser.Utils.Objects.GetValue,P=1e3/60,O=function(e){var t=u(e.gameObject,e),n={blendMode:g(e,"blendMode","ADD"),emitZone:{type:"edge",source:{getPoints:function(){return t}},yoyo:g(e,"yoyo",!1)},speed:g(e,"spread",10)},o=g(e,"lifespan",1e3),r=(n.lifespan=o,g(e,"duration",void 0)),r=(void 0!==r&&((r=r-o)<=0?n.quantity=t.length:(o=r/t.length)<=P?n.quantity=Math.ceil(P/o):n.frequency=o),g(e,"textureFrames",void 0)),o=(r&&(n.frame={frames:r,cycle:g(e,"textureFrameCycle",!0)}),g(e,"scale",void 0)),r=(void 0!==o&&(n.scale=o),g(e,"alpha",void 0)),o=(void 0!==r&&(n.alpha=r),g(e,"tint",void 0));return void 0!==o&&(n.tint=o),n},j=Phaser.Utils.Objects.GetValue,w=function(t,e){var n=1+j(e,"repeat",0),o=0;t.emitCallback=s(function(){0===t.emitZone.counter&&(o===n?(t.emitZone.counter=-1,o=0,t.stop()):o++)},void 0,t.emitCallback,t.emitCallbackScope),t.emitCallbackScope=null;return t.deathCallback=s(function(){var e;0===t.alive.length&&(e=t.manager).emit("emitter.complete",e,t)},void 0,t.deathCallback,t.deathCallbackScope),t.deathCallbackScope=null,t},x=Phaser.Utils.Objects.GetValue,k=Phaser.Math.Vector2,C=Phaser.GameObjects.Particles.ParticleEmitter.prototype.preUpdate;return function(e){var t=r;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e);var n,o=l(r);function r(e){if(this instanceof r)return o.call(this,e);throw new TypeError("Cannot call a class as a function")}return t=r,(e=[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"startEffect",value:p}])&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(Phaser.Plugins.BasePlugin)});
