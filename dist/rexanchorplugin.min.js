!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rexanchorplugin=e()}(void 0,function(){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1})}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");e=t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(i){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=h(i);return a(this,n?(t=h(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function e(){return(e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n)return n=Object.getOwnPropertyDescriptor(n,e),n.get?n.get.call(arguments.length<3?t:i):n.value}).apply(this,arguments)}function u(t,e,i){e instanceof y||(i=e,e=void 0),void 0===i?i=new g:!0===i&&(i=m);var n=(t=t.sys.scale).baseSize,r=t.parentSize,o=t.canvasBounds,t=t.displayScale,s=0<=o.x?0:-(o.x*t.x),h=0<=o.y?0:-(o.y*t.y),a=r.width>=o.width?n.width:n.width-(o.width-r.width)*t.x,n=r.height>=o.height?n.height:n.height-(o.height-r.height)*t.y;return i.setTo(s,h,a,n),e&&(o=e.scrollX,r=e.scrollY,t=1/e.zoomX,s=1/e.zoomY,i.width*=t,i.height*=s,i.centerX=e.centerX+o,i.centerY=e.centerY+r),i}var l={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},p=Phaser.Scene,f=function(t){return t instanceof p},v=Phaser.Utils.Objects.GetValue,d=function(){function i(t,e){r(this,i),this.parent=t,this.scene=null==(t=t)||"object"!==n(t)?null:f(t)?t:t.scene&&f(t.scene)?t.scene:t.parent&&t.parent.scene&&f(t.parent.scene)?t.parent.scene:void 0,this.isShutdown=!1,this.setEventEmitter(v(e,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return t(i,[{key:"shutdown",value:function(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function(){this.destroy(!0)}},{key:"onParentDestroy",value:function(t,e){this.destroy(e)}}]),i}(),y=(Object.assign(d.prototype,l),Phaser.Cameras.Scene2D.BaseCamera),g=Phaser.Geom.Rectangle,m=new g,b=function(){s(n,d);var i=c(n);function n(t,e){return r(this,n),(t=i.call(this,t,{eventEmitter:!1})).viewport=void 0,t.resetFromJSON(e),t}return t(n,[{key:"resetFromJSON",value:function(t){void 0!==(t=void 0===t?{}:t).x?(l=null,c=t.x):void 0!==t.left?(l=0,c=t.left):void 0!==t.right?(l=1,c=t.right):void 0!==t.centerX&&(l=.5,c=t.centerX),void 0!==t.y?(p=null,u=t.y):void 0!==t.top?(p=0,u=t.top):void 0!==t.bottom?(p=1,u=t.bottom):void 0!==t.centerY&&(p=.5,u=t.centerY),void 0!==c&&(c=c.replace("left","0%").replace("right","100%").replace("center","50%").split("%"),e=parseFloat(c[0])/100,i=""===c[1]?0:parseFloat(c[1])),void 0!==u&&(u=u.replace("top","0%").replace("bottom","100%").replace("center","50%").split("%"),n=parseFloat(u[0])/100,r=""===u[1]?0:parseFloat(u[1]));var e,i,n,r,o,s,h,a,c=t.width,u=(void 0!==c&&(c=c.split("%"),o=parseFloat(c[0])/100,s=""===c[1]?0:parseFloat(c[1])),t.height),c=(void 0!==u&&(u=u.split("%"),h=parseFloat(u[0])/100,a=""===u[1]?0:parseFloat(u[1])),this.setAlign(l,p),this.setPercentage(e,n),this.setOffset(i,r),this.setSizePercentage(o,h),this.setSizePadding(s,a),t.onResizeCallback),u=t.onResizeCallbackScope,l=(void 0!==c&&this.setResizeCallback(c,u),t.onUpdateViewportCallback),p=t.onUpdateViewportCallbackScope;return void 0!==l&&this.setUpdateViewportCallback(l,p),this.autoAnchor(t.enable),this}},{key:"shutdown",value:function(t){this.isShutdown||(this.autoAnchor(!1),this.viewport=void 0,this.onUpdateViewportCallback=void 0,this.onUpdateViewportCallbackScope=void 0,this.onResizeCallback=void 0,this.onResizeCallbackScope=void 0,e(h(n.prototype),"shutdown",this).call(this,t))}},{key:"autoAnchor",value:function(t){return this.autoAnchorEnable!==(t=!!(t=void 0===t?!0:t))&&(t?(this.scene.sys.scale.on("resize",this.anchor,this),this.anchor()):this.scene.sys.scale.off("resize",this.anchor,this),this.autoAnchorEnable=t),this}},{key:"setAlign",value:function(t,e){return this.alignX=t,this.alignY=e,this}},{key:"setPercentage",value:function(t,e){return this.percentageX=t,this.percentageY=e,this}},{key:"setOffset",value:function(t,e){return this.offsetX=t,this.offsetY=e,this}},{key:"setSizePercentage",value:function(t,e){return this.percentageWidth=t,this.percentageHeight=e,this}},{key:"setSizePadding",value:function(t,e){return this.paddingWidth=t,this.paddingHeight=e,this}},{key:"setResizeCallback",value:function(t,e){return this.onResizeCallback=t,this.onResizeCallbackScope=e,this}},{key:"setUpdateViewportCallback",value:function(t,e){return this.onUpdateViewportCallback=t,this.onUpdateViewportCallbackScope=e,this}},{key:"anchor",value:function(){return this.updateViewport(),this.updateSize(),this.updatePosition(),this}},{key:"updateSize",value:function(){var t,e=this.onResizeCallback,i=this.onResizeCallbackScope,n=this.anchorWidth,r=this.anchorHeight;void 0===n&&void 0===r||!e||(t=this.parent,void 0===n&&(n=t.width),void 0===r&&(r=t.height),i?e.call(i,n,r,t,this):e(n,r,t,this))}},{key:"updatePosition",value:function(){var t=this.parent;return null===this.alignX?t.x=this.anchorX:void 0!==this.alignX&&(t.x=this.anchorX+t.displayWidth*(t.originX-this.alignX)),null===this.alignY?t.y=this.anchorY:void 0!==this.alignY&&(t.y=this.anchorY+t.displayHeight*(t.originY-this.alignY)),this}},{key:"anchorX",get:function(){return this.viewport.x+this.viewport.width*this.percentageX+this.offsetX}},{key:"anchorY",get:function(){return this.viewport.y+this.viewport.height*this.percentageY+this.offsetY}},{key:"anchorWidth",get:function(){if(void 0!==this.percentageWidth)return this.viewport.width*this.percentageWidth+this.paddingWidth}},{key:"anchorHeight",get:function(){if(void 0!==this.percentageHeight)return this.viewport.height*this.percentageHeight+this.paddingHeight}},{key:"updateViewport",value:function(){var t=this.parent.scene.cameras.main,t=(this.viewport=u(this.scene,t,this.viewport),this.viewport),e=this.onUpdateViewportCallback,i=this.onUpdateViewportCallbackScope;e&&(i?e.call(i,t,this.parent,this):e(t,this.parent,this))}}]),n}();return function(){s(i,Phaser.Plugins.BasePlugin);var e=c(i);function i(t){return r(this,i),e.call(this,t)}return t(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new b(t,e)}}]),i}()});
